{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Inicio","text":""},{"location":"#tarea-unidad-1","title":"Tarea Unidad 1","text":"<p>Alumno: Jes\u00fas S\u00e1nchez Asignatura: Puesta en Producci\u00f3n Segura Curso: 2025-2026 </p>"},{"location":"#indice-de-contenidos","title":"\u00cdndice de contenidos","text":"<ol> <li>Introducci\u00f3n<ul> <li>Introducci\u00f3n de la actividad</li> </ul> </li> <li>Errores en el c\u00f3digo<ul> <li>Resoluci\u00f3n de los problemas del programa</li> </ul> </li> <li>Sandbox<ul> <li>Ejecuci\u00f3n segura del programa</li> </ul> </li> </ol>"},{"location":"#introduccion","title":"Introducci\u00f3n","text":"<p>En esta pr\u00e1ctica he trabajado sobre una aplicaci\u00f3n Python llamada \"Lavadero\". El objetivo ha sido analizar el c\u00f3digo, documentarlo y corregir sus errores de ejecuci\u00f3n.</p> <p>El c\u00f3digo fuente corregido se encuentra en la carpeta <code>src/</code> de este repositorio.</p> <p>Continuar con la siguiente pagina --&gt; Continuar</p>"},{"location":"sandbox/","title":"Entorno Seguro","text":""},{"location":"sandbox/#apartado-4-ejecucion-en-entorno-controlado-sandbox","title":"Apartado 4: Ejecuci\u00f3n en Entorno Controlado (Sandbox)","text":"<p>Para esta pr\u00e1ctica, he utilizado Visual Studio Code ejecut\u00e1ndose sobre un sistema Linux adem\u00e1s de la propia terminal. He considerado esto como mi entorno \"Sandbox\" por las siguientes razones:</p> <ol> <li>Espacio de Usuario: He ejecutado todos los scripts (<code>python main_app.py</code>) con mi usuario est\u00e1ndar, sin utilizar permisos de administrador (<code>sudo</code>). Esto garantiza que, si el c\u00f3digo tuviera un error grave que intentara borrar archivos del sistema, el sistema operativo lo bloquear\u00eda por falta de permisos.</li> <li>Entorno Virtual: Aunque para esta tarea simple no era obligatorio, Python permite usar <code>venv</code> para aislar las librer\u00edas de este proyecto de las del resto del sistema.</li> </ol>"},{"location":"tests/","title":"Errores en el c\u00f3digo","text":""},{"location":"tests/#apartado-2-errores-en-el-codigo","title":"Apartado 2: Errores en el c\u00f3digo","text":"<p>En este apartado se explicaran los 14 errores que habia en el c\u00f3digo.</p>"},{"location":"tests/#1-errores-de-estado-y-validaciones-tests-13","title":"1. Errores de Estado y Validaciones (Tests 1\u20133)","text":""},{"location":"tests/#error-1-inicializacion-incorrecta-test-1","title":"Error 1: Inicializaci\u00f3n Incorrecta (Test 1)","text":"<ul> <li> <p>El Problema   El test fallaba al verificar que un lavadero nuevo tuviera los ingresos a <code>0.0</code> y las opciones desactivadas.</p> </li> <li> <p>La Causa   El constructor <code>__init__</code> original no garantizaba un estado limpio ni reseteaba las banderas a <code>False</code> al crearse el objeto.</p> </li> <li> <p>Soluci\u00f3n   Se modific\u00f3 el constructor para inicializar expl\u00edcitamente todas las variables a <code>False</code> y <code>0.0</code> (o llamar internamente al m\u00e9todo <code>terminar()</code>).</p> </li> </ul>"},{"location":"tests/#error-2-validacion-de-encerado-test-2","title":"Error 2: Validaci\u00f3n de Encerado (Test 2)","text":"<ul> <li> <p>El Problema   El sistema permit\u00eda contratar encerado sin haber pedido secado a mano, violando las reglas de negocio y sin lanzar la excepci\u00f3n esperada.   </p> </li> <li> <p>La Causa   Faltaba una cl\u00e1usula de guarda al inicio del m\u00e9todo <code>_hacer_lavado</code>.</p> </li> <li> <p>Soluci\u00f3n   Se a\u00f1adi\u00f3 la validaci\u00f3n:</p> </li> </ul> <pre><code>if encerado and not secado_a_mano:\n    raise ValueError(...)\n</code></pre>"},{"location":"tests/#error-3-lavadero-ocupado-test-3","title":"Error 3: Lavadero Ocupado (Test 3)","text":"<ul> <li> <p>El Problema   Se pod\u00eda iniciar un nuevo lavado mientras otro ya estaba en curso.   </p> </li> <li> <p>La Causa   No se verificaba el flag <code>self.ocupado</code> antes de aceptar un coche nuevo.</p> </li> <li> <p>Soluci\u00f3n   Se a\u00f1adi\u00f3 el control:</p> </li> </ul>"},{"location":"tests/#if-selfocupado-raise-runtimeerror","title":"<pre><code>if self.ocupado:\n    raise RuntimeError(...)\n</code></pre>","text":""},{"location":"tests/#2-errores-de-precios-tests-48","title":"2. Errores de Precios (Tests 4\u20138)","text":""},{"location":"tests/#error-4-precio-del-prelavado-test-4","title":"Error 4: Precio del Prelavado (Test 4)","text":"<ul> <li> <p>El Problema   El coste total no sumaba los 6.50 \u20ac esperados.   </p> </li> <li> <p>La Causa   La l\u00f3gica de <code>_cobrar</code> no aplicaba correctamente el incremento de 1.50 \u20ac.</p> </li> <li> <p>Soluci\u00f3n   Se verific\u00f3 en <code>_cobrar</code> que el bloque sume exactamente 1.50 \u20ac:</p> </li> </ul> <pre><code>if self.__prelavado_a_mano:\n            coste_lavado += 1.50 \n</code></pre>"},{"location":"tests/#error-5-precio-del-secado-a-mano-test-5","title":"Error 5: Precio del Secado a Mano (Test 5)","text":"<ul> <li> <p>El Problema   El sistema cobraba de m\u00e1s (total incorrecto en lugar de 6.00 \u20ac).     </p> </li> <li> <p>La Causa   El c\u00f3digo original sumaba 1.20 \u20ac, cuando la regla indica 1.00 \u20ac (5 + 1).</p> </li> <li> <p>Soluci\u00f3n   Se corrigi\u00f3 en <code>_cobrar</code> que el bloque sume 1\u20ac:</p> </li> </ul> <pre><code>if self.__secado_a_mano:\n            coste_lavado += 1.00 # CORREGIDO (Antes 1.20)\n</code></pre>"},{"location":"tests/#error-6-precio-del-encerado-test-6","title":"Error 6: Precio del Encerado (Test 6)","text":"<ul> <li> <p>El Problema   El total no alcanzaba los 7.20 \u20ac al pedir secado y encerado.     </p> </li> <li> <p>La Causa   El precio del encerado estaba mal definido (probablemente 1.00 \u20ac).</p> </li> <li> <p>Soluci\u00f3n   Se ajust\u00f3 el precio del encerado a 1.20 \u20ac.   </p><pre><code>if self.__encerado:\n            coste_lavado += 1.20 # CORREGIDO (Antes 1.00)\n</code></pre><p></p> </li> </ul>"},{"location":"tests/#error-7-precio-combinado-prelavado-secado-test-7","title":"Error 7: Precio Combinado (Prelavado + Secado) (Test 7)","text":"<ul> <li> <p>El Problema   El c\u00e1lculo combinado fallaba.     </p> </li> <li> <p>La Causa   Error arrastrado del precio incorrecto del secado (Error 5).</p> </li> <li> <p>Soluci\u00f3n   Al corregir el precio del secado, este test pas\u00f3 autom\u00e1ticamente.</p> </li> </ul>"},{"location":"tests/#error-8-precio-completo-full-equipe-test-8","title":"Error 8: Precio Completo \"Full Equipe\" (Test 8)","text":"<ul> <li> <p>El Problema   El total no era 8.70 \u20ac como se esperaba.     </p> </li> <li> <p>La Causa   Suma de errores en los precios de secado y encerado.</p> </li> <li> <p>Soluci\u00f3n   Con los ajustes anteriores (1.00 \u20ac y 1.20 \u20ac), el total se corrigi\u00f3.</p> </li> </ul>"},{"location":"tests/#3-errores-de-flujo-de-fases-tests-914","title":"3. Errores de Flujo de Fases (Tests 9\u201314)","text":""},{"location":"tests/#error-9-flujo-basico-test-9","title":"Error 9: Flujo B\u00e1sico (Test 9)","text":"<ul> <li> <p>El Problema   El ciclo sin extras terminaba abruptamente o entraba en fases desconocidas.     </p> </li> <li> <p>La Causa   La m\u00e1quina de estados (<code>avanzarFase</code>) ten\u00eda condicionales incorrectos.</p> </li> <li> <p>Soluci\u00f3n   Se depuraron los <code>if/else</code> para asegurar el flujo:</p> </li> </ul> <pre><code>0 \u2192 1 \u2192 3 \u2192 4 \u2192 5 \u2192 6 \u2192 0\n</code></pre>"},{"location":"tests/#error-10-salto-de-prelavado-test-10","title":"Error 10: Salto de Prelavado (Test 10)","text":"<ul> <li> <p>El Problema   La Fase 2 se saltaba aunque el prelavado estuviera contratado.     </p> </li> <li> <p>La Causa   Desde <code>FASE_COBRANDO (1)</code> se pasaba directamente a echar agua (3).</p> </li> <li> <p>Soluci\u00f3n   Se corrigi\u00f3 la transici\u00f3n: si hay prelavado, ir a Fase 2.</p> </li> </ul>"},{"location":"tests/#error-11-salto-de-secado-manual-test-11","title":"Error 11: Salto de Secado Manual (Test 11)","text":"<ul> <li> <p>El Problema   Desde los rodillos (Fase 5) siempre se iba al secado autom\u00e1tico.     </p> </li> <li> <p>La Causa   El <code>if</code> ignoraba la preferencia de secado manual.</p> </li> <li> <p>Soluci\u00f3n   Se forz\u00f3 el desv\u00edo:</p> </li> <li> <p>Si <code>secado_a_mano</code> es <code>True</code> \u2192 Fase 7.</p> </li> </ul>"},{"location":"tests/#error-12-salto-de-encerado-test-12","title":"Error 12: Salto de Encerado (Test 12)","text":"<ul> <li> <p>El Problema   El ciclo terminaba en la Fase 7, sin pasar por el encerado.     </p> </li> <li> <p>La Causa   La Fase 7 llamaba directamente a <code>terminar()</code>.</p> </li> <li> <p>Soluci\u00f3n   Se a\u00f1adi\u00f3 l\u00f3gica:</p> </li> <li> <p>Si <code>encerado</code> es <code>True</code> \u2192 Fase 8.</p> </li> </ul>"},{"location":"tests/#error-13-flujo-combinado-test-13","title":"Error 13: Flujo Combinado (Test 13)","text":"<ul> <li> <p>El Problema   Fallaba la combinaci\u00f3n de prelavado y secado.     </p> </li> <li> <p>La Causa   Errores acumulados de las transiciones (Errores 10 y 11).</p> </li> <li> <p>Soluci\u00f3n   Las correcciones individuales resolvieron el flujo.</p> </li> </ul>"},{"location":"tests/#error-14-flujo-completo-test-14","title":"Error 14: Flujo Completo (Test 14)","text":"<ul> <li>El Problema   El recorrido m\u00e1s largo fallaba:     </li> </ul> <pre><code>0 \u2192 1 \u2192 2 \u2192 3 \u2192 4 \u2192 5 \u2192 7 \u2192 8 \u2192 0\n</code></pre> <ul> <li> <p>La Causa   La l\u00f3gica original de estados era inconsistente.</p> </li> <li> <p>Soluci\u00f3n   Tras corregir todas las transiciones anteriores, el ciclo completo funcion\u00f3 correctamente.</p> </li> </ul>"},{"location":"tests/#evidencia-final","title":"Evidencia Final","text":"<p>Todos los 14 tests unitarios pasan correctamente tras aplicar las correcciones descritas.</p> <p>Resultado Final (Tests OK): Tras aplicar estas correcciones l\u00f3gicas en <code>src/lavadero.py</code>, volv\u00ed a lanzar los tests:</p> <p></p> <p>Todos los requisitos funcionales se cumplen ahora.</p>"}]}